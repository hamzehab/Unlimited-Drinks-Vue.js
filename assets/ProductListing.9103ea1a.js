import{n as V,o as b,i as z,k as C,p as D,Q as _,q as P,r as B}from"./FooterComponent.f2fbde6f.js";import{Q as N}from"./QRating.3d369874.js";import{a8 as E,r as g,j as F,t as i,D as $,y as l,v as o,x as n,a6 as u,L as f,af as R,u as r,z as Q,T as k,E as c,C as U}from"./index.37379c88.js";const A=["src"],M={class:"text-grey-6 text-caption row oswald"},K={class:"q-mr-xs text-overline"},G={class:"on-right"},H={key:0},J={key:1,class:"on-right"},W={class:"row justify-between"},X={class:"ys row items-start text-body1"},Y={class:"oswald text-h5"},Z={class:"row justify-end items-center q-pr-sm"},tt={key:0,class:"text-warning animated zoomIn"},et={key:0,class:"q-py-none on-left"},at={key:0,class:"row justify-end"},st={key:0},ot={key:0,class:"text-positive animated zoomIn"},it={key:0,class:"text-negative animated zoomIn slow"},nt={key:0,class:"text-amber-8"},dt={key:0},rt={key:1},lt={key:2,class:"row items-center justify-evenly"},vt={__name:"ProductListing",props:{product:{type:Object,required:!0}},setup(a){const m=a,O=E(),v=V(),d=g(1),w=m.product.rating,h=g(!1),x=g(null),q=g(null),I=g(null),L=s=>{s&&s.stopPropagation&&s.stopPropagation(),d.value>1&&(d.value=parseInt(d.value)-1)},S=s=>{s&&s.stopPropagation&&s.stopPropagation(),d.value<25&&(d.value=parseInt(d.value)+1)},y=()=>{const s=m.product.category_name.toLowerCase().split(" ").join("-");O.push(`/${s}/${m.product.id}`)},T=async s=>{s&&s.stopPropagation&&s.stopPropagation(),h.value=!0;const e=d.value+(v.items.find(t=>t.product_id===m.product.id)?v.items.find(t=>t.product_id===m.product.id).quantity:0);try{const t=await U.get(`product/cart/${m.product.id}?quantity=${e}`);t.data.can_add===!0?(v.addItem(m.product.id,d.value),x.value=!0,q.value=!1):(q.value=!0,I.value=t.data.quantity)}catch(t){console.error(t)}setTimeout(()=>{h.value=!1},1e3),setTimeout(()=>{x.value=null},3e3)},j=s=>`${new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"})}`;return F(()=>{const s=document.querySelectorAll(".fade-left"),e=new IntersectionObserver(t=>{t.forEach(p=>{p.target.classList.toggle("animated",p.isIntersecting),p.target.classList.toggle("fadeInLeft",p.isIntersecting),p.target.classList.toggle("slow",p.isIntersecting)})});s.forEach(t=>{e.observe(t)})}),(s,e)=>(i(),$(B,{class:"fade-left q-mx-auto q-my-md",style:{"max-width":"70%"},bordered:""},{default:l(()=>[o(b,{class:"q-mx-xl q-my-md",horizontal:""},{default:l(()=>[n("img",{class:"cursor-pointer",src:`static/products/${a.product.image}`,style:{width:"200px",height:"200px"},onClick:e[0]||(e[0]=t=>y())},null,8,A),o(z,{class:"bg-deep-purple-14",style:{"padding-right":"1px","padding-left":"1px"},vertical:""}),o(b,{class:"q-pb-none",style:{width:"100%"}},{default:l(()=>[n("div",{class:"ys text-h6 cursor-pointer",style:{width:"fit-content"},onClick:e[1]||(e[1]=t=>y())},u(a.product.name),1),n("div",M,[n("span",null,u(j(a.product.created_at)),1),o(z,{vertical:"",class:"on-right on-left"}),n("span",{class:"on-left cursor-pointer",style:{width:"fit-content"},onClick:e[2]||(e[2]=t=>y())}," by \xA0 "+u(a.product.brand),1)]),n("div",{class:"row items-center oswald cursor-pointer",style:{width:"fit-content"},onClick:e[4]||(e[4]=t=>y())},[n("div",K,u(f(w).toFixed(1)),1),o(N,{modelValue:f(w),"onUpdate:modelValue":e[3]||(e[3]=t=>R(w)?w.value=t:null),max:"5",size:"sm",color:"deep-purple-14",icon:"star_border","icon-selected":"star","icon-half":"star_half",readonly:""},null,8,["modelValue"]),n("div",G,[a.product.reviews.length>0?(i(),r("div",H,u(a.product.reviews.length===1?a.product.reviews.length+" review":a.product.reviews.length+" reviews"),1)):(i(),r("div",J,"No reviews"))])]),n("div",W,[n("div",{class:"q-mt-md cursor-pointer",onClick:e[5]||(e[5]=t=>y())},[n("span",X,[Q(" $"),n("span",Y,u(a.product.price.toFixed(2)),1)])]),n("div",Z,[o(C,{class:"cursor-pointer on-left",name:"remove",size:"20px",onClick:e[6]||(e[6]=t=>L())}),o(D,{class:"rounded-borders","input-class":"ys text-bold text-h6 text-center",style:{width:"2.5rem"},modelValue:d.value,"onUpdate:modelValue":e[7]||(e[7]=t=>d.value=t),modelModifiers:{trim:!0},mask:"##",dense:"",borderless:"","unmasked-value":"",readonly:""},null,8,["modelValue"]),o(C,{class:"cursor-pointer on-right",name:"add",size:"20px",onClick:e[8]||(e[8]=t=>S())})])]),o(b,{class:"oswald row justify-end items-center q-px-none q-pb-none"},{default:l(()=>[o(k,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:l(()=>[q.value?(i(),r("div",tt," Cannot add to cart. Only "+u(I.value)+" left in stock! ",1)):c("",!0)]),_:1}),f(v).items.find(t=>t.product_id===a.product.id)?(i(),r("div",et,[f(v).items.find(t=>t.product_id===a.product.id)?(i(),r("div",at,[f(v).items.find(t=>t.product_id===a.product.id).quantity+d.value<=25?(i(),r("div",st,[o(k,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:l(()=>[x.value?(i(),r("div",ot,u(a.product.name)+" successfully added to cart! ",1)):c("",!0)]),_:1}),o(k,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:l(()=>[x.value==!1?(i(),r("div",it," Something went wrong adding item to cart! ")):c("",!0)]),_:1})])):c("",!0),o(k,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:l(()=>[f(v).items.find(t=>t.product_id===a.product.id).quantity+d.value>25?(i(),r("div",nt," Quantity exceeds limit ")):c("",!0)]),_:1})])):c("",!0)])):c("",!0),o(_,{color:a.product.quantity===0?"negative":"deep-purple-14",rounded:"",push:"",disable:a.product.quantity===0,onClick:e[9]||(e[9]=t=>T())},{default:l(()=>[a.product.quantity===0?(i(),r("div",dt,"OUT OF STOCK")):a.product.quantity!==0&&!h.value?(i(),r("div",rt,[Q(" ADD TO CART "),a.product.quantity!==0?(i(),$(C,{key:0,name:"mdi-cart-outline on-right"})):c("",!0)])):h.value?(i(),r("div",lt,[o(P,{color:"white",size:"1em",thickness:8})])):c("",!0)]),_:1},8,["color","disable"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{vt as _};
