import{n as T,i as S,o as m,k as b,p as L,Q as j,q as V,r as _}from"./FooterComponent.f2fbde6f.js";import{a8 as B,r as f,j as D,t as n,D as q,y as o,x as v,v as s,a6 as y,T as w,E as d,L as C,u,z as E,C as N}from"./index.37379c88.js";const A=["src"],F=v("div",{class:"text-caption row justify-end"},"Max limit 25",-1),M={class:"text-warning animated zoomIn"},P={key:0,class:"row justify-end"},R={key:0},U={key:0,class:"text-positive animated zoomIn"},K={key:0,class:"text-negative animated zoomIn slow"},G={key:0,class:"text-amber-8"},H={key:0},J={key:1},W={key:2},Z={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(a){const p=a,c=T(),$=B(),i=f(1),g=f(!1),k=f(null),I=f(null),z=f(null),x=()=>{const r=p.product.category_name.toLowerCase().split(" ").join("-");$.push(`/${r}/${p.product.id}`)},h=async r=>{r&&r.stopPropagation&&r.stopPropagation(),g.value=!0;const e=i.value+(c.items.find(t=>t.product_id===p.product.id)?c.items.find(t=>t.product_id===p.product.id).quantity:0);try{const t=await N.get(`product/cart/${p.product.id}?quantity=${e}`);t.data.can_add===!0?(c.addItem(p.product.id,i.value),k.value=!0,I.value=!1):(I.value=!0,z.value=t.data.quantity)}catch(t){console.error(t)}setTimeout(()=>{g.value=!1},1e3),setTimeout(()=>{k.value=null},3e3)},Q=()=>{i.value>1&&(i.value=parseInt(i.value)-1)},O=()=>{i.value<25&&(i.value=parseInt(i.value)+1)};return D(()=>{const r=document.querySelectorAll(".slide"),e=new IntersectionObserver(t=>{t.forEach(l=>{l.target.classList.toggle("animated",l.isIntersecting),l.target.classList.toggle("slideInLeft",l.isIntersecting),l.target.classList.toggle("slower",l.isIntersecting),l.isIntersecting&&e.unobserve(l.target)})});r.forEach(t=>{e.observe(t)})}),(r,e)=>(n(),q(_,{class:"slide q-my-lg oswald",style:{width:"100%","max-width":"400px"}},{default:o(()=>[v("img",{class:"cursor-pointer",src:`static/products/${a.product.image}`,onClick:e[0]||(e[0]=t=>x())},null,8,A),s(S,{class:"q-mt-md bg-deep-purple-14",style:{"padding-top":"1px","padding-bottom":"1px"}}),s(m,{class:"q-pb-none",onClick:e[2]||(e[2]=t=>x())},{default:o(()=>[v("span",{class:"text-h6 cursor-pointer",onClick:e[1]||(e[1]=t=>x())},y(a.product.name),1)]),_:1}),s(m,{class:"q-pb-none"},{default:o(()=>[v("div",null,y(a.product.description.slice(0,250))+"...",1)]),_:1}),s(m,{class:"q-pb-none row justify-end items-center"},{default:o(()=>[s(b,{class:"cursor-pointer on-left",name:"remove",size:"20px",onClick:e[3]||(e[3]=t=>Q())}),s(L,{class:"rounded-borders","input-class":"ys text-bold text-h6 text-center",style:{width:"2.5rem"},modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=t=>i.value=t),modelModifiers:{trim:!0},mask:"##",dense:"",borderless:"","unmasked-value":"",readonly:""},null,8,["modelValue"]),s(b,{class:"cursor-pointer on-right",name:"add",size:"20px",onClick:e[5]||(e[5]=t=>O())})]),_:1}),s(m,{class:"q-pt-none"},{default:o(()=>[F]),_:1}),I.value?(n(),q(m,{key:0},{default:o(()=>[s(w,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:o(()=>[v("div",M," Cannot add to cart. Only "+y(z.value)+" left in stock! ",1)]),_:1})]),_:1})):d("",!0),C(c).items.find(t=>t.product_id===a.product.id)?(n(),q(m,{key:1,class:"q-py-none"},{default:o(()=>[C(c).items.find(t=>t.product_id===a.product.id)?(n(),u("div",P,[C(c).items.find(t=>t.product_id===a.product.id).quantity+i.value<=25?(n(),u("div",R,[s(w,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:o(()=>[k.value?(n(),u("div",U,y(a.product.name)+" successfully added to cart! ",1)):d("",!0)]),_:1}),s(w,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:o(()=>[k.value==!1?(n(),u("div",K," Something went wrong adding item to cart! ")):d("",!0)]),_:1})])):d("",!0),s(w,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:o(()=>[C(c).items.find(t=>t.product_id===a.product.id).quantity+i.value>25?(n(),u("div",G," Quantity exceeds limit ")):d("",!0)]),_:1})])):d("",!0)]),_:1})):d("",!0),s(m,{class:"row justify-between items-center"},{default:o(()=>[v("div",{class:"ys text-h6 cursor-pointer",onClick:e[6]||(e[6]=t=>x())}," $ "+y(a.product.price.toFixed(2)),1),s(j,{color:a.product.quantity===0?"negative":"deep-purple-14",rounded:"",push:"",disable:a.product.quantity===0,onClick:e[7]||(e[7]=t=>h())},{default:o(()=>[a.product.quantity===0?(n(),u("div",H,"OUT OF STOCK")):a.product.quantity!==0&&!g.value?(n(),u("div",J,[E(" ADD TO CART "),a.product.quantity!==0?(n(),q(b,{key:0,name:"mdi-cart-outline on-right"})):d("",!0)])):g.value?(n(),u("div",W,[s(V,{color:"white",size:"1em",thickness:8})])):d("",!0)]),_:1},8,["color","disable"])]),_:1})]),_:1}))}};export{Z as _};
